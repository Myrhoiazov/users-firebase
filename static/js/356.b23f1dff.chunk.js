"use strict";(self.webpackChunkwallet_finance_app=self.webpackChunkwallet_finance_app||[]).push([[356],{6206:function(e,r,t){t.d(r,{db:function(){return u},t:function(){return c}});var a=t(4702),n=t(9455),s=t(276),l={apiKey:"AIzaSyBfXAxRJslxqj-AerizfJMYiWw8-rVucBc",authDomain:"users-2b39a.firebaseapp.com",databaseURL:"https://users-2b39a-default-rtdb.europe-west1.firebasedatabase.app",projectId:"users-2b39a",storageBucket:"users-2b39a.appspot.com",messagingSenderId:"164438428254",appId:"1:164438428254:web:8f2e84b8a7579b11df82cf"},i=(0,a.ZF)(l),u=(0,n.ad)(i),c=(0,s.cF)(i)},356:function(e,r,t){t.r(r),t.d(r,{default:function(){return q}});var a=t(4165),n=t(5861),s=t(4942),l=t(1413),i=t(9439),u=t(2791),c=t(890),o=t(9964),d=t(3239),m=t(4554),f=t(3735),h=t(7071),p=t(6151),x=t(9455),Z=t(276),b=t(5206),g=t(6206),j=t(4819),v=t.n(j),y=v().object({name:v().string().required(),secondName:v().string().required(),email:v().string().pattern(/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/).required(),tel:v().string().pattern(/(?=.*\+[0-9]{3}\s?[0-9]{2}\s?[0-9]{3}\s?[0-9]{4,5}$)/).required(),birthYear:v().date().iso().required(),avatar:v().any()}),z="cartPage_wrapper__heIJN",_="cartPage_form__F-NCH",N="cartPage_error__7Nr73",k=t(184),w=/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/,C=/(?=.*\+[0-9]{3}\s?[0-9]{2}\s?[0-9]{3}\s?[0-9]{4,5}$)/,I="user",S={name:"",secondName:"",email:"",tel:"",birthYear:"",avatar:null},q=function(){var e=(0,u.useState)(S),r=(0,i.Z)(e,2),t=r[0],j=r[1],v=(0,u.useState)(!1),q=(0,i.Z)(v,2),A=q[0],X=q[1],W=(0,u.useState)(null),J=(0,i.Z)(W,2),Y=J[0],P=J[1],B=(0,u.useState)({}),$=(0,i.Z)(B,2),F=$[0],H=$[1],L=function(e){var r=e.target,a=r.name,n=r.value;j((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,s.Z)({},a,n))})),localStorage.setItem(I,JSON.stringify((0,l.Z)((0,l.Z)({},t),{},(0,s.Z)({},a,n))))},O=function(e){if(e.preventDefault(),H({}),""!==t.name.trim()&&""!==t.secondName.trim()&&""!==t.birthYear)return w.test(t.email)||H((function(e){return(0,l.Z)((0,l.Z)({},e),{},{email:"error"})})),(t.email.length<3||t.email.length>254)&&H((function(e){return(0,l.Z)((0,l.Z)({},e),{},{email:"error"})})),C.test(t.tel)||H((function(e){return(0,l.Z)((0,l.Z)({},e),{},{tel:"error"})})),!y.validate(t).error&&!Object.keys(F).length||(b.Am.error("\u041d\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u0434\u0430\u043d\u043e \u043f\u043e\u043b\u0435"),!1);b.Am.error("\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c \u0432\u0441\u0456 \u043f\u043e\u043b\u044f")},D=function(){var e=(0,n.Z)((0,a.Z)().mark((function e(r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O(r)){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,X(!0),e.next=7,(0,x.ET)((0,x.hJ)(g.db,"users"),{user:t});case 7:X(!1),b.Am.success("".concat(t.name," \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0434\u043e\u0434\u0430\u043d\u043e")),E(),r.target.reset(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),b.Am.error("\u0429\u043e\u0441\u044c \u043f\u0456\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a \u0441\u043f\u0440\u043e\u0431\u0443\u0439 \u0449\u0435 \u0440\u0430\u0437");case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(r){return e.apply(this,arguments)}}(),E=function(e){j(S),P(null),localStorage.removeItem(I)};return(0,u.useEffect)((function(){var e=JSON.parse(localStorage.getItem(I));e&&j(e),Y&&function(){var e=(0,Z.iH)(g.t,"/files/".concat(Y.name)),r=(0,Z.B0)(e,Y);r.on("state_changed",(function(){(0,Z.Jt)(r.snapshot.ref).then((function(e){j((function(r){return(0,l.Z)((0,l.Z)({},r),{},{avatar:e})}))}))}))}()}),[Y,F]),(0,k.jsxs)("div",{className:z,children:[(0,k.jsx)(c.Z,{variant:"h5",sx:{backgroundColor:"rgb(25, 118, 210)",p:1,pl:5,pr:5,color:"white"},children:"Add User"}),(0,k.jsx)(o.Z,{open:A,sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+3}},children:(0,k.jsx)(d.Z,{color:"grey"})}),(0,k.jsx)(m.Z,{className:_,children:(0,k.jsxs)("form",{onSubmit:function(e){return D(e)},children:[(0,k.jsx)(m.Z,{sx:{mb:3},children:(0,k.jsx)(f.Z,{label:"\u0456\u043c'\u044f",type:"text",name:"name",value:t.name,onChange:L,fullWidth:!0,size:"small",required:!0})}),(0,k.jsx)(m.Z,{sx:{mb:3},children:(0,k.jsx)(f.Z,{label:"\u043f\u0440\u0456\u0437\u0432\u0438\u0449\u0435",type:"text",name:"secondName",value:t.secondName,onChange:L,fullWidth:!0,size:"small",required:!0})}),(0,k.jsxs)(m.Z,{sx:{mb:3},children:[(0,k.jsx)(f.Z,{label:"email",error:!!F.email,type:"email",name:"email",value:t.email,onChange:L,fullWidth:!0,size:"small",required:!0}),F.email?(0,k.jsx)(h.Z,{id:"my-helper-text",className:N,children:"\u041d\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u0434\u0430\u043d\u0435 \u043f\u043e\u043b\u0435"}):null]}),(0,k.jsxs)(m.Z,{sx:{mb:3},children:[(0,k.jsx)(f.Z,{label:"\u0442\u0435\u043b\u0435\u0444\u043e\u043d",placeholder:"+380 (XX) XXX-XX-XX)",error:!!F.tel,type:"tel",name:"tel",value:t.tel,onChange:L,fullWidth:!0,size:"small",required:!0}),F.tel?(0,k.jsx)(h.Z,{id:"my-helper-text",className:N,children:"\u041d\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u0434\u0430\u043d\u0435 \u043f\u043e\u043b\u0435"}):null]}),(0,k.jsx)(m.Z,{sx:{mb:3},children:(0,k.jsx)(f.Z,{label:"\u0434\u0430\u0442\u0430 \u043d\u0430\u0440\u043e\u0434\u0436\u0435\u043d\u043d\u044f",type:"date",name:"birthYear",value:t.birthYear,InputLabelProps:{shrink:!0},onChange:L,fullWidth:!0,size:"medium",required:!0})}),(0,k.jsxs)(m.Z,{sx:{mb:3},children:[(0,k.jsx)(f.Z,{label:"\u0444\u043e\u0442\u043e \u043f\u0440\u043e\u0444\u0435\u043b\u044e",type:"file",InputLabelProps:{shrink:!0},onChange:function(e){return P(e.target.files[0])},fullWidth:!0,size:"medium"}),(0,k.jsx)(h.Z,{id:"my-helper-text",children:"\u041d\u0435 \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435"})]}),(0,k.jsxs)(m.Z,{sx:{display:"flex",justifyContent:"center",minHeight:"45px"},children:[(0,k.jsx)(p.Z,{type:"reset",value:"reset",variant:"contained",fullWidth:!0,onClick:function(e){return E(e)},children:"\u0437\u0431\u0440\u043e\u0441\u0438\u0442\u0438"}),(0,k.jsx)(p.Z,{type:"submit",variant:"contained",fullWidth:!0,sx:{ml:2},children:"\u043d\u0430\u0434\u0456\u0441\u043b\u0430\u0442\u0438"})]})]})})]})}}}]);
//# sourceMappingURL=356.b23f1dff.chunk.js.map