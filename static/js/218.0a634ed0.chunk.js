"use strict";(self.webpackChunkwallet_finance_app=self.webpackChunkwallet_finance_app||[]).push([[218],{4785:function(e,r,t){t.d(r,{Z:function(){return N}});var n=t(4165),a=t(5861),s=t(4942),i=t(1413),l=t(9439),u=t(2791),c=t(266),o=t(890),d=t(9964),m=t(3239),f=t(8870),h=t(3735),p=t(7071),x=t(6151),Z=t(9455),b=t(276),g=t(5206),j=t(6206),v=t(4819),y=t.n(v),z=y().object({name:y().string().min(3).max(20).required(),secondName:y().string().min(3).max(20).required(),email:y().string().pattern(/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/).required(),tel:y().string().pattern(/(?=.*\+[0-9]{3}\s?[0-9]{2}\s?[0-9]{3}\s?[0-9]{4,5}$)/).required(),birthYear:y().date().iso().required(),avatar:y().any()}),k="FormUser_form__4Bi+T",C="FormUser_error__SObku",S=t(184),_=/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/,I=/(?=.*\+[0-9]{3}\s?[0-9]{2}\s?[0-9]{3}\s?[0-9]{4,5}$)/,q="user",w={name:"",secondName:"",email:"",tel:"",birthYear:"",avatar:null},N=function(e){var r=e.onClose,t=(0,u.useState)(w),v=(0,l.Z)(t,2),y=v[0],N=v[1],X=(0,u.useState)(!1),W=(0,l.Z)(X,2),A=W[0],J=W[1],Y=(0,u.useState)(null),B=(0,l.Z)(Y,2),F=B[0],O=B[1],U=(0,u.useState)({}),$=(0,l.Z)(U,2),D=$[0],L=$[1],T=function(e){var r=e.target,t=r.name,n=r.value;N((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,s.Z)({},t,n))})),localStorage.setItem(q,JSON.stringify((0,i.Z)((0,i.Z)({},y),{},(0,s.Z)({},t,n))))},E=function(){if(L({}),""!==y.name.trim()&&""!==y.secondName.trim()&&""!==y.birthYear){if(_.test(y.email)||L((function(e){return(0,i.Z)((0,i.Z)({},e),{},{email:"error"})})),(y.email.length<3||y.email.length>254)&&L((function(e){return(0,i.Z)((0,i.Z)({},e),{},{email:"error"})})),I.test(y.tel)||L((function(e){return(0,i.Z)((0,i.Z)({},e),{},{tel:"error"})})),!z.validate(y).error&&!Object.keys(D).length)return!0;g.Am.error("\u041d\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u0434\u0430\u043d\u043e \u043f\u043e\u043b\u0435")}else g.Am.error("\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c \u0432\u0441\u0456 \u043f\u043e\u043b\u044f")},H=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),E()){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,J(!0),e.next=8,(0,Z.ET)((0,Z.hJ)(j.db,"users"),{user:y});case 8:J(!1),g.Am.success("".concat(y.name," \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0434\u043e\u0434\u0430\u043d\u043e")),P(),t.target.reset(),r(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),g.Am.error("\u0429\u043e\u0441\u044c \u043f\u0456\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a \u0441\u043f\u0440\u043e\u0431\u0443\u0439 \u0449\u0435 \u0440\u0430\u0437");case 18:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(r){return e.apply(this,arguments)}}(),P=function(){N(w),O(null),localStorage.removeItem(q)};return(0,u.useEffect)((function(){var e=JSON.parse(localStorage.getItem(q));e&&N(e),F&&function(){var e=(0,b.iH)(j.t,"/files/".concat(F.name)),r=(0,b.B0)(e,F);r.on("state_changed",(function(){(0,b.Jt)(r.snapshot.ref).then((function(e){N((function(r){return(0,i.Z)((0,i.Z)({},r),{},{avatar:e})}))}))}))}()}),[F]),(0,S.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"100vh",paddingTop:"50px"},children:[(0,S.jsx)(o.Z,{variant:"h5",sx:{backgroundColor:"rgb(25, 118, 210)",p:1,pl:3,pr:3,color:"white"},children:"Add User"}),(0,S.jsx)(d.Z,{open:A,sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+3}},children:(0,S.jsx)(m.Z,{color:"grey"})}),(0,S.jsx)(f.Z,{className:k,children:(0,S.jsxs)("form",{onSubmit:function(e){return H(e)},children:[(0,S.jsx)(f.Z,{sx:{mb:3},children:(0,S.jsx)(h.Z,{label:"\u0456\u043c'\u044f",type:"text",name:"name",value:y.name,onChange:T,fullWidth:!0,size:"small",required:!0})}),(0,S.jsx)(f.Z,{sx:{mb:3},children:(0,S.jsx)(h.Z,{label:"\u043f\u0440\u0456\u0437\u0432\u0438\u0449\u0435",type:"text",name:"secondName",value:y.secondName,onChange:T,fullWidth:!0,size:"small",required:!0})}),(0,S.jsxs)(f.Z,{sx:{mb:3},children:[(0,S.jsx)(h.Z,{label:"email",error:!!D.email,type:"email",name:"email",value:y.email,onChange:T,fullWidth:!0,size:"small",required:!0}),D.email?(0,S.jsx)(p.Z,{id:"my-helper-text",className:C,children:"\u041d\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u0434\u0430\u043d\u0435 \u043f\u043e\u043b\u0435"}):null]}),(0,S.jsxs)(f.Z,{sx:{mb:3},children:[(0,S.jsx)(h.Z,{label:"\u0442\u0435\u043b\u0435\u0444\u043e\u043d",placeholder:"+380 (XX) XXX-XX-XX)",error:!!D.tel,type:"tel",name:"tel",value:y.tel,onChange:T,fullWidth:!0,size:"small",required:!0}),D.tel?(0,S.jsx)(p.Z,{id:"my-helper-text",className:C,children:"\u041d\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u0434\u0430\u043d\u0435 \u043f\u043e\u043b\u0435"}):null]}),(0,S.jsx)(f.Z,{sx:{mb:3},children:(0,S.jsx)(h.Z,{label:"\u0434\u0430\u0442\u0430 \u043d\u0430\u0440\u043e\u0434\u0436\u0435\u043d\u043d\u044f",type:"date",name:"birthYear",value:y.birthYear,InputLabelProps:{shrink:!0},onChange:T,fullWidth:!0,size:"medium",required:!0})}),(0,S.jsxs)(f.Z,{sx:{mb:3},children:[(0,S.jsx)(h.Z,{label:"\u0444\u043e\u0442\u043e \u043f\u0440\u043e\u0444\u0435\u043b\u044e",type:"file",InputLabelProps:{shrink:!0},onChange:function(e){return O(e.target.files[0])},fullWidth:!0,size:"medium"}),(0,S.jsx)(p.Z,{id:"my-helper-text",children:"\u041d\u0435 \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435"})]}),(0,S.jsxs)(f.Z,{sx:{display:"flex",justifyContent:"center",minHeight:"45px"},children:[(0,S.jsx)(x.Z,{type:"reset",value:"reset",variant:"contained",fullWidth:!0,onClick:function(e){return P(e)},children:"\u0441\u043a\u0438\u043d\u0443\u0442\u0438"}),(0,S.jsx)(x.Z,{type:"submit",variant:"contained",fullWidth:!0,sx:{ml:2},children:"\u043d\u0430\u0434\u0456\u0441\u043b\u0430\u0442\u0438"})]})]})})]})}},6206:function(e,r,t){t.d(r,{db:function(){return u},t:function(){return c}});var n=t(4702),a=t(9455),s=t(276),i={apiKey:"AIzaSyBfXAxRJslxqj-AerizfJMYiWw8-rVucBc",authDomain:"users-2b39a.firebaseapp.com",databaseURL:"https://users-2b39a-default-rtdb.europe-west1.firebasedatabase.app",projectId:"users-2b39a",storageBucket:"users-2b39a.appspot.com",messagingSenderId:"164438428254",appId:"1:164438428254:web:8f2e84b8a7579b11df82cf"},l=(0,n.ZF)(i),u=(0,a.ad)(l),c=(0,s.cF)(l)},3218:function(e,r,t){t.r(r),t.d(r,{default:function(){return i}});var n=(0,t(3814).Z)(),a=t(4785),s=t(184),i=function(){return(0,s.jsx)(n,{children:(0,s.jsx)(a.Z,{})})}}}]);
//# sourceMappingURL=218.0a634ed0.chunk.js.map