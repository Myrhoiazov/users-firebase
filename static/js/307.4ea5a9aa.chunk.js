"use strict";(self.webpackChunkwallet_finance_app=self.webpackChunkwallet_finance_app||[]).push([[307],{4785:function(e,r,t){t.d(r,{Z:function(){return R}});var n=t(4165),a=t(5861),o=t(4942),i=t(1413),s=t(9439),l=t(2791),c=t(266),u=t(890),d=t(9964),f=t(3239),m=t(8870),h=t(3735),v=t(7071),x=t(6151),p=t(7799),Z=t(276),g=t(5206),b=t(8742),j=t(4819),y=t.n(j),C=y().object({name:y().string().min(3).max(20).required(),secondName:y().string().min(3).max(20).required(),email:y().string().pattern(/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/).required(),tel:y().string().pattern(/(?=.*\+[0-9]{3}\s?[0-9]{2}\s?[0-9]{3}\s?[0-9]{4,5}$)/).required(),birthYear:y().date().iso().required(),avatar:y().any()}),w="FormUser_form__4Bi+T",A="FormUser_error__SObku",k=t(184),S=/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/,N=/(?=.*\+[0-9]{3}\s?[0-9]{2}\s?[0-9]{3}\s?[0-9]{4,5}$)/,z="user",M={name:"",secondName:"",email:"",tel:"",birthYear:"",avatar:null},R=function(e){var r=e.onClose,t=(0,l.useState)(M),j=(0,s.Z)(t,2),y=j[0],R=j[1],_=(0,l.useState)(!1),I=(0,s.Z)(_,2),P=I[0],W=I[1],q=(0,l.useState)(null),E=(0,s.Z)(q,2),D=E[0],H=E[1],F=(0,l.useState)({}),X=(0,s.Z)(F,2),B=X[0],O=X[1],V=function(e){var r=e.target,t=r.name,n=r.value;R((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,o.Z)({},t,n))})),localStorage.setItem(z,JSON.stringify((0,i.Z)((0,i.Z)({},y),{},(0,o.Z)({},t,n))))},J=function(){if(O({}),""!==y.name.trim()&&""!==y.secondName.trim()&&""!==y.birthYear){if(S.test(y.email)||O((function(e){return(0,i.Z)((0,i.Z)({},e),{},{email:"error"})})),(y.email.length<3||y.email.length>254)&&O((function(e){return(0,i.Z)((0,i.Z)({},e),{},{email:"error"})})),N.test(y.tel)||O((function(e){return(0,i.Z)((0,i.Z)({},e),{},{tel:"error"})})),!C.validate(y).error&&!Object.keys(B).length)return!0;g.Am.error("\u041d\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u0434\u0430\u043d\u043e \u043f\u043e\u043b\u0435")}else g.Am.error("\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c \u0432\u0441\u0456 \u043f\u043e\u043b\u044f")},Y=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),J()){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,W(!0),e.next=8,(0,p.ET)((0,p.hJ)(b.db,"users"),{user:y});case 8:W(!1),g.Am.success("".concat(y.name," \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0434\u043e\u0434\u0430\u043d\u043e")),L(),t.target.reset(),r(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),g.Am.error("\u0429\u043e\u0441\u044c \u043f\u0456\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a \u0441\u043f\u0440\u043e\u0431\u0443\u0439 \u0449\u0435 \u0440\u0430\u0437");case 18:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(r){return e.apply(this,arguments)}}(),L=function(){R(M),H(null),localStorage.removeItem(z)};return(0,l.useEffect)((function(){var e=JSON.parse(localStorage.getItem(z));e&&R(e),D&&function(){var e=(0,Z.iH)(b.t,"/files/".concat(D.name)),r=(0,Z.B0)(e,D);r.on("state_changed",(function(){(0,Z.Jt)(r.snapshot.ref).then((function(e){R((function(r){return(0,i.Z)((0,i.Z)({},r),{},{avatar:e})}))}))}))}()}),[D]),(0,k.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"100vh"},children:[(0,k.jsx)(u.Z,{variant:"h5",sx:{backgroundColor:"rgb(25, 118, 210)",p:1,pl:3,pr:3,mb:2,color:"white"},children:"Add User"}),(0,k.jsx)(d.Z,{open:P,sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+3}},children:(0,k.jsx)(f.Z,{color:"grey"})}),(0,k.jsx)(m.Z,{className:w,children:(0,k.jsxs)("form",{onSubmit:function(e){return Y(e)},children:[(0,k.jsx)(m.Z,{sx:{mb:3},children:(0,k.jsx)(h.Z,{label:"\u0456\u043c'\u044f",type:"text",name:"name",value:y.name,onChange:V,fullWidth:!0,size:"small",required:!0})}),(0,k.jsx)(m.Z,{sx:{mb:3},children:(0,k.jsx)(h.Z,{label:"\u043f\u0440\u0456\u0437\u0432\u0438\u0449\u0435",type:"text",name:"secondName",value:y.secondName,onChange:V,fullWidth:!0,size:"small",required:!0})}),(0,k.jsxs)(m.Z,{sx:{mb:3},children:[(0,k.jsx)(h.Z,{label:"email",error:!!B.email,type:"email",name:"email",value:y.email,onChange:V,fullWidth:!0,size:"small",required:!0}),B.email?(0,k.jsx)(v.Z,{id:"my-helper-text",className:A,children:"\u041d\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u0434\u0430\u043d\u0435 \u043f\u043e\u043b\u0435"}):null]}),(0,k.jsxs)(m.Z,{sx:{mb:3},children:[(0,k.jsx)(h.Z,{label:"\u0442\u0435\u043b\u0435\u0444\u043e\u043d",placeholder:"+380 (XX) XXX-XX-XX)",error:!!B.tel,type:"tel",name:"tel",value:y.tel,onChange:V,fullWidth:!0,size:"small",required:!0}),B.tel?(0,k.jsx)(v.Z,{id:"my-helper-text",className:A,children:"\u041d\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u0434\u0430\u043d\u0435 \u043f\u043e\u043b\u0435"}):null]}),(0,k.jsx)(m.Z,{sx:{mb:3},children:(0,k.jsx)(h.Z,{label:"\u0434\u0430\u0442\u0430 \u043d\u0430\u0440\u043e\u0434\u0436\u0435\u043d\u043d\u044f",type:"date",name:"birthYear",value:y.birthYear,InputLabelProps:{shrink:!0},onChange:V,fullWidth:!0,size:"medium",required:!0})}),(0,k.jsxs)(m.Z,{sx:{mb:3},children:[(0,k.jsx)(h.Z,{label:"\u0444\u043e\u0442\u043e \u043f\u0440\u043e\u0444\u0435\u043b\u044e",type:"file",InputLabelProps:{shrink:!0},onChange:function(e){return H(e.target.files[0])},fullWidth:!0,size:"medium"}),(0,k.jsx)(v.Z,{id:"my-helper-text",children:"\u041d\u0435 \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435"})]}),(0,k.jsxs)(m.Z,{sx:{display:"flex",justifyContent:"center",minHeight:"45px"},children:[(0,k.jsx)(x.Z,{type:"reset",value:"reset",variant:"contained",fullWidth:!0,onClick:function(e){return L(e)},children:"\u0441\u043a\u0438\u043d\u0443\u0442\u0438"}),(0,k.jsx)(x.Z,{type:"submit",variant:"contained",fullWidth:!0,sx:{ml:2},children:"\u043d\u0430\u0434\u0456\u0441\u043b\u0430\u0442\u0438"})]})]})})]})}},8742:function(e,r,t){t.d(r,{db:function(){return l},l:function(){return s},t:function(){return c}});var n=t(4702),a=t(7799),o=t(276),i={apiKey:"AIzaSyBfXAxRJslxqj-AerizfJMYiWw8-rVucBc",authDomain:"users-2b39a.firebaseapp.com",databaseURL:"https://users-2b39a-default-rtdb.europe-west1.firebasedatabase.app",projectId:"users-2b39a",storageBucket:"users-2b39a.appspot.com",messagingSenderId:"164438428254",appId:"1:164438428254:web:8f2e84b8a7579b11df82cf"},s=(0,n.ZF)(i),l=(0,a.ad)(s),c=(0,o.cF)(s)},9307:function(e,r,t){t.r(r),t.d(r,{default:function(){return ne}});var n=t(4165),a=t(1413),o=t(5861),i=t(9439),s=t(890),l=t(8870),c=t(9964),u=t(3239),d=t(2791),f=t(7799),m=t(8742),h=t(6598),v=t(5206),x="ButtonAddUser_btnAddTransaction__8def6",p=t(184),Z=function(e){var r=e.openModal;return(0,p.jsx)("button",{onClick:r,className:x,type:"button"})},g=t(7462),b=t(3366),j=t(8182),y=t(4419),C=t(6934),w=t(1402),A=t(5527),k=t(5878),S=t(1217);function N(e){return(0,S.Z)("MuiCard",e)}(0,k.Z)("MuiCard",["root"]);var z=["className","raised"],M=(0,C.ZP)(A.Z,{name:"MuiCard",slot:"Root",overridesResolver:function(e,r){return r.root}})((function(){return{overflow:"hidden"}})),R=d.forwardRef((function(e,r){var t=(0,w.Z)({props:e,name:"MuiCard"}),n=t.className,a=t.raised,o=void 0!==a&&a,i=(0,b.Z)(t,z),s=(0,g.Z)({},t,{raised:o}),l=function(e){var r=e.classes;return(0,y.Z)({root:["root"]},N,r)}(s);return(0,p.jsx)(M,(0,g.Z)({className:(0,j.Z)(l.root,n),elevation:o?8:void 0,ref:r,ownerState:s},i))})),_=t(4942);function I(e){return(0,S.Z)("MuiCardActionArea",e)}var P=(0,k.Z)("MuiCardActionArea",["root","focusVisible","focusHighlight"]),W=t(2982),q=["children","className","focusVisibleClassName"],E=(0,C.ZP)(W.Z,{name:"MuiCardActionArea",slot:"Root",overridesResolver:function(e,r){return r.root}})((function(e){var r,t=e.theme;return r={display:"block",textAlign:"inherit",width:"100%"},(0,_.Z)(r,"&:hover .".concat(P.focusHighlight),{opacity:(t.vars||t).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}}),(0,_.Z)(r,"&.".concat(P.focusVisible," .").concat(P.focusHighlight),{opacity:(t.vars||t).palette.action.focusOpacity}),r})),D=(0,C.ZP)("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:function(e,r){return r.focusHighlight}})((function(e){var r=e.theme;return{overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:r.transitions.create("opacity",{duration:r.transitions.duration.short})}})),H=d.forwardRef((function(e,r){var t=(0,w.Z)({props:e,name:"MuiCardActionArea"}),n=t.children,a=t.className,o=t.focusVisibleClassName,i=(0,b.Z)(t,q),s=t,l=function(e){var r=e.classes;return(0,y.Z)({root:["root"],focusHighlight:["focusHighlight"]},I,r)}(s);return(0,p.jsxs)(E,(0,g.Z)({className:(0,j.Z)(l.root,a),focusVisibleClassName:(0,j.Z)(o,l.focusVisible),ref:r,ownerState:s},i,{children:[n,(0,p.jsx)(D,{className:l.focusHighlight,ownerState:s})]}))}));function F(e){return(0,S.Z)("MuiCardContent",e)}(0,k.Z)("MuiCardContent",["root"]);var X=["className","component"],B=(0,C.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:function(e,r){return r.root}})((function(){return{padding:16,"&:last-child":{paddingBottom:24}}})),O=d.forwardRef((function(e,r){var t=(0,w.Z)({props:e,name:"MuiCardContent"}),n=t.className,a=t.component,o=void 0===a?"div":a,i=(0,b.Z)(t,X),s=(0,g.Z)({},t,{component:o}),l=function(e){var r=e.classes;return(0,y.Z)({root:["root"]},F,r)}(s);return(0,p.jsx)(B,(0,g.Z)({as:o,className:(0,j.Z)(l.root,n),ownerState:s,ref:r},i))})),V=(0,t(9201).Z)((0,p.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function J(e){return(0,S.Z)("MuiAvatar",e)}(0,k.Z)("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);var Y=["alt","children","className","component","imgProps","sizes","src","srcSet","variant"],L=(0,C.ZP)("div",{name:"MuiAvatar",slot:"Root",overridesResolver:function(e,r){var t=e.ownerState;return[r.root,r[t.variant],t.colorDefault&&r.colorDefault]}})((function(e){var r=e.theme,t=e.ownerState;return(0,g.Z)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:r.typography.fontFamily,fontSize:r.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},"rounded"===t.variant&&{borderRadius:(r.vars||r).shape.borderRadius},"square"===t.variant&&{borderRadius:0},t.colorDefault&&(0,g.Z)({color:(r.vars||r).palette.background.default},r.vars?{backgroundColor:r.vars.palette.Avatar.defaultBg}:{backgroundColor:"light"===r.palette.mode?r.palette.grey[400]:r.palette.grey[600]}))})),U=(0,C.ZP)("img",{name:"MuiAvatar",slot:"Img",overridesResolver:function(e,r){return r.img}})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),T=(0,C.ZP)(V,{name:"MuiAvatar",slot:"Fallback",overridesResolver:function(e,r){return r.fallback}})({width:"75%",height:"75%"});var $=d.forwardRef((function(e,r){var t=(0,w.Z)({props:e,name:"MuiAvatar"}),n=t.alt,a=t.children,o=t.className,s=t.component,l=void 0===s?"div":s,c=t.imgProps,u=t.sizes,f=t.src,m=t.srcSet,h=t.variant,v=void 0===h?"circular":h,x=(0,b.Z)(t,Y),Z=null,C=function(e){var r=e.crossOrigin,t=e.referrerPolicy,n=e.src,a=e.srcSet,o=d.useState(!1),s=(0,i.Z)(o,2),l=s[0],c=s[1];return d.useEffect((function(){if(n||a){c(!1);var e=!0,o=new Image;return o.onload=function(){e&&c("loaded")},o.onerror=function(){e&&c("error")},o.crossOrigin=r,o.referrerPolicy=t,o.src=n,a&&(o.srcset=a),function(){e=!1}}}),[r,t,n,a]),l}((0,g.Z)({},c,{src:f,srcSet:m})),A=f||m,k=A&&"error"!==C,S=(0,g.Z)({},t,{colorDefault:!k,component:l,variant:v}),N=function(e){var r=e.classes,t={root:["root",e.variant,e.colorDefault&&"colorDefault"],img:["img"],fallback:["fallback"]};return(0,y.Z)(t,J,r)}(S);return Z=k?(0,p.jsx)(U,(0,g.Z)({alt:n,src:f,srcSet:m,sizes:u,ownerState:S,className:N.img},c)):null!=a?a:A&&n?n[0]:(0,p.jsx)(T,{className:N.fallback}),(0,p.jsx)(L,(0,g.Z)({as:l,ownerState:S,className:(0,j.Z)(N.root,o),ref:r},x,{children:Z}))})),K={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",A100:"#ff9e80",A200:"#ff6e40",A400:"#ff3d00",A700:"#dd2c00"},G=function(e){var r=e.user,t=e.id;return(0,p.jsx)(R,{sx:{minWidth:300},children:(0,p.jsx)(H,{children:(0,p.jsxs)(O,{children:[(0,p.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,p.jsx)($,{alt:r.name,src:r.avatar,sx:{width:56,height:56,objectFit:"cover",objectPosition:"center",marginRight:"10px",bgcolor:K[500]},children:r.name[0]}),(0,p.jsxs)(s.Z,{gutterBottom:!0,variant:"h5",component:"div",children:[r.name," ",r.secondName]})]}),(0,p.jsxs)(l.Z,{sx:{display:"flex"},children:[(0,p.jsx)(s.Z,{sx:{mr:2,fontWeight:"700"},variant:"body2",color:"text.secondary",children:"Email:"}),(0,p.jsx)(s.Z,{variant:"body2",color:"text.secondary",children:r.email})]}),(0,p.jsxs)(l.Z,{sx:{display:"flex"},children:[(0,p.jsx)(s.Z,{sx:{mr:2,fontWeight:"700"},variant:"body2",color:"text.secondary",children:"\u0414\u0435\u043d\u044c \u043d\u0430\u0440\u043e\u0434\u0436\u0435\u043d\u043d\u044f:"}),(0,p.jsx)(s.Z,{variant:"body2",color:"text.secondary",children:r.birthYear})]}),(0,p.jsxs)(l.Z,{sx:{display:"flex"},children:[(0,p.jsx)(s.Z,{sx:{mr:2,fontWeight:"700"},variant:"body2",color:"text.secondary",children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d:"}),(0,p.jsx)(s.Z,{variant:"body2",color:"text.secondary",children:r.tel})]})]})})},t)},Q="Modal_overlay__b+zEz",ee="Modal_modal__yEgVW",re=function(e){var r=e.onClose,t=e.children,n=function(e){"Escape"===e.code&&r()};return(0,d.useEffect)((function(){return window.addEventListener("keydown",n),function(){window.removeEventListener("keydown",n)}}),[]),(0,p.jsx)("div",{className:Q,onClick:function(e){e.target===e.currentTarget&&r()},children:(0,p.jsx)("div",{className:ee,children:t})})},te=t(4785),ne=function(){var e=(0,d.useState)([]),r=(0,i.Z)(e,2),t=r[0],x=r[1],g=(0,d.useState)(!1),b=(0,i.Z)(g,2),j=b[0],y=b[1],C=(0,d.useState)(!1),w=(0,i.Z)(C,2),A=w[0],k=w[1],S=(0,d.useCallback)((0,o.Z)((0,n.Z)().mark((function e(){var r,t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(!0),e.next=4,(0,f.PL)((0,f.hJ)(m.db,"users"));case 4:r=e.sent,t=r.docs.map((function(e){return(0,a.Z)((0,a.Z)({},e.data()),{},{id:e.id})})),x(t),y(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),v.Am.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),[t]);return(0,d.useEffect)((function(){S()}),[]),t.length?(0,p.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"100vh"},children:[(0,p.jsx)(c.Z,{open:j,sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+3}},children:(0,p.jsx)(u.Z,{color:"grey"})}),(0,p.jsx)(l.Z,{sx:{display:"flex",justifyContent:"center",flexWrap:"wrap",gap:2},children:null===t||void 0===t?void 0:t.map((function(e){var r=e.user,t=e.id;return(0,p.jsx)(G,{user:r,id:t},t)}))}),(0,p.jsx)(Z,{openModal:function(){k(!0)}}),A&&(0,p.jsx)(re,{onClose:function(){return k(!1)},children:(0,p.jsx)(te.Z,{onClose:function(){return k(!1)}})})]}):(0,p.jsx)(h.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh"},children:(0,p.jsx)(s.Z,{children:"User not found"})})}},6598:function(e,r,t){var n=(0,t(7184).Z)();r.Z=n}}]);
//# sourceMappingURL=307.4ea5a9aa.chunk.js.map